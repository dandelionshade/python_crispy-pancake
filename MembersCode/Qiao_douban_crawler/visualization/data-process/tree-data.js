const data = [
  {
    "title": "肖申克的救赎",
    "rating": 9.7
},
{
    "title": "霸王别姬",
    "rating": 9.6
},
{
    "title": "阿甘正传",
    "rating": 9.5
},
{
    "title": "泰坦尼克号",
    "rating": 9.5
},
{
    "title": "千与千寻",
    "rating": 9.4
},
{
    "title": "这个杀手不太冷",
    "rating": 9.4
},
{
    "title": "美丽人生",
    "rating": 9.5
},
{
    "title": "星际穿越",
    "rating": 9.4
},
{
    "title": "盗梦空间",
    "rating": 9.4
},
{
    "title": "楚门的世界",
    "rating": 9.4
},
{
    "title": "辛德勒的名单",
    "rating": 9.5
},
{
    "title": "忠犬八公的故事",
    "rating": 9.4
},
{
    "title": "海上钢琴师",
    "rating": 9.3
},
{
    "title": "三傻大闹宝莱坞",
    "rating": 9.2
},
{
    "title": "放牛班的春天",
    "rating": 9.3
},
{
    "title": "机器人总动员",
    "rating": 9.3
},
{
    "title": "疯狂动物城",
    "rating": 9.2
},
{
    "title": "无间道",
    "rating": 9.3
},
{
    "title": "控方证人",
    "rating": 9.6
},
{
    "title": "大话西游之大圣娶亲",
    "rating": 9.2
},
{
    "title": "熔炉",
    "rating": 9.3
},
{
    "title": "教父",
    "rating": 9.3
},
{
    "title": "触不可及",
    "rating": 9.3
},
{
    "title": "当幸福来敲门",
    "rating": 9.2
},
{
    "title": "寻梦环游记",
    "rating": 9.1
},
{
    "title": "末代皇帝",
    "rating": 9.3
},
{
    "title": "龙猫",
    "rating": 9.2
},
{
    "title": "怦然心动",
    "rating": 9.1
},
{
    "title": "哈利·波特与魔法石",
    "rating": 9.2
},
{
    "title": "活着",
    "rating": 9.3
},
{
    "title": "蝙蝠侠：黑暗骑士",
    "rating": 9.2
},
{
    "title": "指环王3：王者无敌",
    "rating": 9.3
},
{
    "title": "我不是药神",
    "rating": 9.0
},
{
    "title": "乱世佳人",
    "rating": 9.3
},
{
    "title": "飞屋环游记",
    "rating": 9.1
},
{
    "title": "素媛",
    "rating": 9.3
},
{
    "title": "哈尔的移动城堡",
    "rating": 9.1
},
{
    "title": "十二怒汉",
    "rating": 9.4
},
{
    "title": "让子弹飞",
    "rating": 9.0
},
{
    "title": "何以为家",
    "rating": 9.1
},
{
    "title": "海蒂和爷爷",
    "rating": 9.3
},
{
    "title": "猫鼠游戏",
    "rating": 9.1
},
{
    "title": "摔跤吧！爸爸",
    "rating": 9.0
},
{
    "title": "天空之城",
    "rating": 9.2
},
{
    "title": "鬼子来了",
    "rating": 9.3
},
{
    "title": "少年派的奇幻漂流",
    "rating": 9.1
},
{
    "title": "钢琴家",
    "rating": 9.3
},
{
    "title": "指环王2：双塔奇兵",
    "rating": 9.2
},
{
    "title": "大话西游之月光宝盒",
    "rating": 9.0
},
{
    "title": "闻香识女人",
    "rating": 9.1
},
{
    "title": "死亡诗社",
    "rating": 9.2
},
{
    "title": "绿皮书",
    "rating": 8.9
},
{
    "title": "大闹天宫",
    "rating": 9.4
},
{
    "title": "罗马假日",
    "rating": 9.1
},
{
    "title": "黑客帝国",
    "rating": 9.1
},
{
    "title": "指环王1：护戒使者",
    "rating": 9.1
},
{
    "title": "天堂电影院",
    "rating": 9.2
},
{
    "title": "教父2",
    "rating": 9.3
},
{
    "title": "狮子王",
    "rating": 9.1
},
{
    "title": "辩护人",
    "rating": 9.2
},
{
    "title": "饮食男女",
    "rating": 9.2
},
{
    "title": "搏击俱乐部",
    "rating": 9.0
},
{
    "title": "本杰明·巴顿奇事",
    "rating": 9.0
},
{
    "title": "美丽心灵",
    "rating": 9.1
},
{
    "title": "穿条纹睡衣的男孩",
    "rating": 9.2
},
{
    "title": "窃听风暴",
    "rating": 9.2
},
{
    "title": "情书",
    "rating": 8.9
},
{
    "title": "两杆大烟枪",
    "rating": 9.1
},
{
    "title": "音乐之声",
    "rating": 9.1
},
{
    "title": "西西里的美丽传说",
    "rating": 8.9
},
{
    "title": "看不见的客人",
    "rating": 8.8
},
{
    "title": "哈利·波特与死亡圣器(下)",
    "rating": 9.0
},
{
    "title": "阿凡达",
    "rating": 8.8
},
{
    "title": "拯救大兵瑞恩",
    "rating": 9.1
},
{
    "title": "功夫",
    "rating": 8.8
},
{
    "title": "小鞋子",
    "rating": 9.2
},
{
    "title": "飞越疯人院",
    "rating": 9.1
},
{
    "title": "沉默的羔羊",
    "rating": 8.9
},
{
    "title": "布达佩斯大饭店",
    "rating": 8.9
},
{
    "title": "哈利·波特与阿兹卡班的囚徒",
    "rating": 9.0
},
{
    "title": "蝴蝶效应",
    "rating": 8.9
},
{
    "title": "禁闭岛",
    "rating": 8.9
},
{
    "title": "致命魔术",
    "rating": 8.9
},
{
    "title": "心灵捕手",
    "rating": 9.0
},
{
    "title": "超脱",
    "rating": 9.0
},
{
    "title": "低俗小说",
    "rating": 8.9
},
{
    "title": "摩登时代",
    "rating": 9.3
},
{
    "title": "喜剧之王",
    "rating": 8.8
},
{
    "title": "春光乍泄",
    "rating": 9.0
},
{
    "title": "海豚湾",
    "rating": 9.3
},
{
    "title": "致命ID",
    "rating": 8.9
},
{
    "title": "杀人回忆",
    "rating": 8.9
},
{
    "title": "美国往事",
    "rating": 9.1
},
{
    "title": "哈利·波特与密室",
    "rating": 8.9
},
{
    "title": "红辣椒",
    "rating": 9.1
},
{
    "title": "加勒比海盗",
    "rating": 8.8
},
{
    "title": "一一",
    "rating": 9.1
},
{
    "title": "七宗罪",
    "rating": 8.8
},
{
    "title": "唐伯虎点秋香",
    "rating": 8.7
},
{
    "title": "狩猎",
    "rating": 9.1
},
{
    "title": "7号房的礼物",
    "rating": 8.9
},
{
    "title": "蝙蝠侠：黑暗骑士崛起",
    "rating": 8.9
},
{
    "title": "被嫌弃的松子的一生",
    "rating": 8.8
},
{
    "title": "甜蜜蜜",
    "rating": 8.9
},
{
    "title": "爱在黎明破晓前",
    "rating": 8.8
},
{
    "title": "第六感",
    "rating": 8.9
},
{
    "title": "超能陆战队",
    "rating": 8.8
},
{
    "title": "重庆森林",
    "rating": 8.8
},
{
    "title": "请以你的名字呼唤我",
    "rating": 8.8
},
{
    "title": "入殓师",
    "rating": 8.9
},
{
    "title": "寄生虫",
    "rating": 8.8
},
{
    "title": "断背山",
    "rating": 8.8
},
{
    "title": "剪刀手爱德华",
    "rating": 8.7
},
{
    "title": "幽灵公主",
    "rating": 8.9
},
{
    "title": "爱在日落黄昏时",
    "rating": 8.9
},
{
    "title": "勇敢的心",
    "rating": 8.9
},
{
    "title": "菊次郎的夏天",
    "rating": 8.9
},
{
    "title": "借东西的小人阿莉埃蒂",
    "rating": 8.9
},
{
    "title": "未麻的部屋",
    "rating": 9.1
},
{
    "title": "消失的爱人",
    "rating": 8.7
},
{
    "title": "无人知晓",
    "rating": 9.1
},
{
    "title": "时空恋旅人",
    "rating": 8.8
},
{
    "title": "完美的世界",
    "rating": 9.1
},
{
    "title": "阳光灿烂的日子",
    "rating": 8.8
},
{
    "title": "倩女幽魂",
    "rating": 8.8
},
{
    "title": "哈利·波特与火焰杯",
    "rating": 8.8
},
{
    "title": "小森林 夏秋篇",
    "rating": 9.0
},
{
    "title": "天使爱美丽",
    "rating": 8.7
},
{
    "title": "茶馆",
    "rating": 9.6
},
{
    "title": "侧耳倾听",
    "rating": 8.9
},
{
    "title": "驯龙高手",
    "rating": 8.8
},
{
    "title": "教父3",
    "rating": 9.0
},
{
    "title": "新世界",
    "rating": 8.9
},
{
    "title": "怪兽电力公司",
    "rating": 8.8
},
{
    "title": "幸福终点站",
    "rating": 8.8
},
{
    "title": "一个叫欧维的男人决定去死",
    "rating": 8.9
},
{
    "title": "傲慢与偏见",
    "rating": 8.7
},
{
    "title": "玩具总动员3",
    "rating": 8.9
},
{
    "title": "头脑特工队",
    "rating": 8.8
},
{
    "title": "小森林 冬春篇",
    "rating": 9.0
},
{
    "title": "被解救的姜戈",
    "rating": 8.8
},
{
    "title": "色，戒",
    "rating": 8.7
},
{
    "title": "萤火之森",
    "rating": 8.8
},
{
    "title": "釜山行",
    "rating": 8.6
},
{
    "title": "神偷奶爸",
    "rating": 8.7
},
{
    "title": "九品芝麻官",
    "rating": 8.7
},
{
    "title": "哪吒闹海",
    "rating": 9.2
},
{
    "title": "告白",
    "rating": 8.8
},
{
    "title": "喜宴",
    "rating": 9.0
},
{
    "title": "玛丽和马克思",
    "rating": 9.0
},
{
    "title": "模仿游戏",
    "rating": 8.8
},
{
    "title": "大鱼",
    "rating": 8.8
},
{
    "title": "头号玩家",
    "rating": 8.6
},
{
    "title": "花样年华",
    "rating": 8.8
},
{
    "title": "射雕英雄传之东成西就",
    "rating": 8.7
},
{
    "title": "七武士",
    "rating": 9.3
},
{
    "title": "我是山姆",
    "rating": 9.0
},
{
    "title": "惊魂记",
    "rating": 9.0
},
{
    "title": "血战钢锯岭",
    "rating": 8.7
},
{
    "title": "阳光姐妹淘",
    "rating": 8.8
},
{
    "title": "恐怖直播",
    "rating": 8.7
},
{
    "title": "你的名字。",
    "rating": 8.5
},
{
    "title": "黑客帝国3：矩阵革命",
    "rating": 8.8
},
{
    "title": "三块广告牌",
    "rating": 8.7
},
{
    "title": "心迷宫",
    "rating": 8.8
},
{
    "title": "电锯惊魂",
    "rating": 8.7
},
{
    "title": "达拉斯买家俱乐部",
    "rating": 8.8
},
{
    "title": "小丑",
    "rating": 8.7
},
{
    "title": "疯狂原始人",
    "rating": 8.7
},
{
    "title": "谍影重重3",
    "rating": 8.8
},
{
    "title": "心灵奇旅",
    "rating": 8.7
},
{
    "title": "背靠背，脸对脸",
    "rating": 9.5
},
{
    "title": "绿里奇迹",
    "rating": 8.9
},
{
    "title": "上帝之城",
    "rating": 9.0
},
{
    "title": "英雄本色",
    "rating": 8.6
},
{
    "title": "风之谷",
    "rating": 8.9
},
{
    "title": "爱在午夜降临前",
    "rating": 8.9
},
{
    "title": "海街日记",
    "rating": 8.8
},
{
    "title": "纵横四海",
    "rating": 8.8
},
{
    "title": "疯狂的石头",
    "rating": 8.6
},
{
    "title": "无间道2",
    "rating": 8.8
},
{
    "title": "卢旺达饭店",
    "rating": 8.9
},
{
    "title": "2001太空漫游",
    "rating": 8.9
},
{
    "title": "雨中曲",
    "rating": 9.1
},
{
    "title": "记忆碎片",
    "rating": 8.7
},
{
    "title": "小偷家族",
    "rating": 8.7
},
{
    "title": "无敌破坏王",
    "rating": 8.7
},
{
    "title": "岁月神偷",
    "rating": 8.7
},
{
    "title": "荒蛮故事",
    "rating": 8.8
},
{
    "title": "忠犬八公物语",
    "rating": 9.2
},
{
    "title": "冰川时代",
    "rating": 8.6
},
{
    "title": "牯岭街少年杀人事件",
    "rating": 8.9
},
{
    "title": "恐怖游轮",
    "rating": 8.5
},
{
    "title": "爆裂鼓手",
    "rating": 8.7
},
{
    "title": "东京教父",
    "rating": 9.0
},
{
    "title": "魔女宅急便",
    "rating": 8.7
},
{
    "title": "大佛普拉斯",
    "rating": 8.7
},
{
    "title": "遗愿清单",
    "rating": 8.7
},
{
    "title": "贫民窟的百万富翁",
    "rating": 8.6
},
{
    "title": "末路狂花",
    "rating": 8.9
},
{
    "title": "东邪西毒",
    "rating": 8.6
},
{
    "title": "你看起来好像很好吃",
    "rating": 8.9
},
{
    "title": "可可西里",
    "rating": 8.9
},
{
    "title": "源代码",
    "rating": 8.5
},
{
    "title": "疯狂的麦克斯4：狂暴之路",
    "rating": 8.7
},
{
    "title": "城市之光",
    "rating": 9.3
},
{
    "title": "海边的曼彻斯特",
    "rating": 8.6
},
{
    "title": "黑天鹅",
    "rating": 8.6
},
{
    "title": "波西米亚狂想曲",
    "rating": 8.6
},
{
    "title": "真爱至上",
    "rating": 8.5
},
{
    "title": "高山下的花环",
    "rating": 9.5
},
{
    "title": "芙蓉镇",
    "rating": 9.3
},
{
    "title": "爱乐之城",
    "rating": 8.4
},
{
    "title": "青蛇",
    "rating": 8.6
},
{
    "title": "雨人",
    "rating": 8.7
},
{
    "title": "初恋这件小事",
    "rating": 8.5
},
{
    "title": "终结者2：审判日",
    "rating": 8.8
},
{
    "title": "人工智能",
    "rating": 8.7
},
{
    "title": "虎口脱险",
    "rating": 8.9
},
{
    "title": "恋恋笔记本",
    "rating": 8.5
},
{
    "title": "花束般的恋爱",
    "rating": 8.6
},
{
    "title": "无耻混蛋",
    "rating": 8.7
},
{
    "title": "新龙门客栈",
    "rating": 8.7
},
{
    "title": "罗生门",
    "rating": 8.8
},
{
    "title": "崖上的波妞",
    "rating": 8.6
},
{
    "title": "千钧一发",
    "rating": 8.8
},
{
    "title": "哈利·波特与死亡圣器(上)",
    "rating": 8.6
},
{
    "title": "彗星来的那一夜",
    "rating": 8.6
},
{
    "title": "白日梦想家",
    "rating": 8.6
},
{
    "title": "萤火虫之墓",
    "rating": 8.7
},
{
    "title": "黑客帝国2：重装上阵",
    "rating": 8.7
},
{
    "title": "奇迹男孩",
    "rating": 8.6
},
{
    "title": "火星救援",
    "rating": 8.5
},
{
    "title": "二十二",
    "rating": 8.7
},
{
    "title": "大红灯笼高高挂",
    "rating": 8.8
},
{
    "title": "战争之王",
    "rating": 8.7
},
{
    "title": "哈利·波特与凤凰社",
    "rating": 8.5
},
{
    "title": "血钻",
    "rating": 8.7
},
{
    "title": "千年女优",
    "rating": 8.8
},
{
    "title": "步履不停",
    "rating": 8.8
},
{
    "title": "谍影重重2",
    "rating": 8.7
},
{
    "title": "房间",
    "rating": 8.8
},
{
    "title": "魂断蓝桥",
    "rating": 8.8
},
{
    "title": "蜘蛛侠：平行宇宙",
    "rating": 8.6
},
{
    "title": "弱点",
    "rating": 8.7
},
{
    "title": "谍影重重",
    "rating": 8.6
},
{
    "title": "朗读者",
    "rating": 8.6
},
{
    "title": "阿飞正传",
    "rating": 8.5
},
{
    "title": "隐藏人物",
    "rating": 8.9
},
{
    "title": "冰雪奇缘",
    "rating": 8.5
}
]

console.log("data.length",data.length)
const deduplication = data.reduce((acc,item) => {
    acc[item.title] = item
    return acc
},{})
let len = 0
const deduplication_arr = []
for(const k in deduplication){
    len++
    deduplication_arr.push(deduplication[k])
}
// console.log("deduplication_arr.length",len,deduplication_arr)

const d1 = deduplication_arr.reduce((acc,item) => {
    if(acc.hasOwnProperty(item.like)){
        acc[item.rating].push(item)
    }else{
        acc[item.rating] = [item]
    }
    return acc
},{})

// console.log(d1)

const arr = []
for(const k in d1){
    arr.push({
        name:`评分：${k} (${d1[k].length}})`,
        children:getChildren(d1[k])
    })
}

console.log(JSON.stringify(arr,null,"  "))

function getChildren(arr){
    
    return arr.reduce((acc,item) => {
        acc.push({
            name:item.title
        })
        return acc
    },[])
}